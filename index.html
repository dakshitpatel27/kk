<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>KAIVAL KRUPA ELECTRIC BIKE WORLD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  :root {
    --bg: #ffffff;
    --bg-card: #f3f6ff;
    --accent: #0ea5e9;
    --accent-2: #14b8a6;
    --text-main: #182230;
    --text-muted: #586575;
    --border-subtle: #d1d9e6;
    --danger: #e53935;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; font-family: system-ui, sans-serif; }
  body { background: var(--bg); color: var(--text-main); min-height: 100vh; }

  header {
    background: #ffffff;
    border-bottom: 1px solid var(--border-subtle);
    position: sticky;
    top: 0;
    z-index: 50;
  }

  .container { max-width: 1200px; margin: auto; padding: 1.2rem; }
  .nav { display: flex; align-items: center; justify-content: space-between; gap: .75rem; flex-wrap: wrap; }

  .brand { display: flex; align-items: center; gap: .7rem; }
  .brand-logo {
    width: 42px; height: 42px; background: var(--accent-2);
    color: #fff; border-radius: 50%; display: flex; justify-content: center; align-items: center;
    font-weight: 700; font-size: 1rem;
  }
  .brand-text-main { font-weight: 700; font-size: 1rem; text-transform: uppercase; }
  .brand-text-sub { font-size: .72rem; color: var(--text-muted); }

  .nav button {
    background: transparent;
    border: 1px solid var(--border-subtle);
    padding: .45rem .9rem; border-radius: .6rem; cursor: pointer;
    color: var(--text-main); transition: .2s;
  }
  .nav button:hover { background: var(--accent); color: #fff; border-color: var(--accent); }

  .card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 1.1rem;
    padding: 1.2rem;
    margin-top: 1rem;
  }

  .products-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); gap: 1rem; margin-top: 1rem; }

  .product-card {
    background: #ffffff;
    border: 1px solid var(--border-subtle);
    border-radius: .9rem;
    padding: .8rem;
    display: flex; flex-direction: column; gap: .55rem;
    transition: .25s;
  }
  .product-card:hover { box-shadow: 0 0 10px rgba(0,0,0,.08); transform: translateY(-2px); }

  .product-image-wrap { height: 140px; display: flex; justify-content: center; align-items: center; overflow: hidden; border-radius: .7rem; }
  .product-image-wrap img { max-height: 100%; width: auto; }

  .product-name { font-size: .95rem; font-weight: 600; }
  .product-price { font-weight: 700; color: var(--accent-2); }

  .btn {
    border: none; border-radius: .7rem; cursor: pointer;
    padding: .45rem .9rem; font-size: .82rem; font-weight: 600;
    display: inline-flex; align-items: center; gap: .3rem;
  }
  .btn-primary { background: var(--accent-2); color: white; }
  .btn-outline { background: transparent; border: 1px solid var(--accent-2); color: var(--accent-2); }

  .layout { display: grid; grid-template-columns: 2fr 1fr; gap: 1.2rem; }
  @media(max-width:900px){ .layout{ grid-template-columns:1fr; } }

  .badge { background: var(--accent); color: white; padding: .2rem .6rem; border-radius: .6rem; font-size: .75rem; }

  .cart-card { position: sticky; top: 70px; }
  .cart-items { max-height: 250px; overflow-y: auto; margin-top: .5rem; }
  .cart-item { border-bottom: 1px dashed var(--border-subtle); padding: .5rem 0; font-size: .8rem; display: flex; justify-content: space-between; align-items: center; }

  input, textarea, select {
    border: 1px solid var(--border-subtle);
    padding: .45rem .6rem; border-radius: .6rem;
    width: 100%; background: #fff;
  }

  footer { text-align: center; margin: 1.7rem 0; color: var(--text-muted); font-size: .8rem; }
</style>
</head>
<body>
    <header>
      <div class="container nav">
        <div class="brand">
          <div class="brand-logo">EV</div>
          <div>
            <div class="brand-text-main">KAIVAL KRUPA ELECTRIC BIKE WORLD</div>
            <div class="brand-text-sub">EV Bike Spare Parts â€¢ Service â€¢ Support</div>
          </div>
        </div>
    
        <div style="display:flex; gap:.6rem;">
          <button id="navShopBtn">Shop</button>
          <button id="navAdminBtn">Admin</button>
    
          <!-- ðŸ›’ NEW NAV CART BUTTON -->
          <button id="navCartBtn">
            ðŸ›’ Cart <span id="navCartCount" style="font-weight:700;">0</span>
          </button>
        </div>
      </div>
    </header>
    
    <div class="container">
    
      <!-- SHOP AREA -->
      <div id="shopSection" class="card">
        <input id="searchInput" type="text" placeholder="Search parts..." />
        <div id="productsGrid" class="products-grid"></div>
      </div>
    
      <!-- ADMIN AREA -->
      <div id="adminSection" class="card" style="display:none;">
        <h3>Admin Panel â€“ Manage Products</h3>
        <form id="adminForm" style="margin-top:.8rem;">
          <input type="hidden" id="partId" />
          <label>Part Name</label><input id="partName" required />
          <label>Category</label><input id="partCategory" />
          <label>Price (â‚¹)</label><input id="partPrice" type="number" required />
          <label>Image URL</label><input id="partImage" />
          <label>Description</label><textarea id="partDesc"></textarea>
          <button class="btn btn-primary" style="margin-top:.6rem;" type="submit">ðŸ’¾ Save</button>
        </form>
        <hr style="margin:1rem 0;">
        <div id="adminList"></div>
      </div>
    
      <!-- CART AREA -->
      <div class="layout">
        <div></div>
        <aside class="card cart-card">
          <h3>ðŸ›’ Cart <span id="cartCount" class="badge">0</span></h3>
          <div id="cartItems" class="cart-items"></div>
          <h3 style="margin: .5rem 0;">Total: <span id="cartTotal" style="color:var(--accent-2);">â‚¹0</span></h3>
    
          <form id="checkoutForm">
            <input id="custName" placeholder="Customer Name" required />
            <input id="custPhone" placeholder="Phone Number" required />
            <textarea id="custAddress" placeholder="Address" required></textarea>
            <textarea id="custNote" placeholder="Optional Note"></textarea>
            <button class="btn btn-primary" style="margin-top:.6rem;" type="submit">ðŸ“² Order on WhatsApp</button>
            <p id="statusMsg" style="margin-top:.4rem;font-size:.82rem;"></p>
          </form>
        </aside>
      </div>
    </div>
    
    <footer>Â© <span id="yearSpan"></span> KAIVAL KRUPA ELECTRIC BIKE WORLD</footer>
    <script>
        const WHATSAPP_NUMBER = "919429293754";
        let products = JSON.parse(localStorage.getItem("ev_products") || "[]") || [];
        let cart = [];
        let adminUnlocked = false;
      
        function saveProducts(){ localStorage.setItem("ev_products", JSON.stringify(products)); }
        function format(v){ return "â‚¹" + v.toLocaleString("en-IN"); }
      
        function renderProducts(){
          const grid = document.getElementById("productsGrid");
          const q = document.getElementById("searchInput").value.toLowerCase();
          grid.innerHTML = "";
      
          products
            .filter(p => p.name.toLowerCase().includes(q))
            .forEach(p => {
              const d = document.createElement("div");
              d.className = "product-card";
              d.innerHTML = `
                <div class="product-image-wrap"><img src="${p.image}" onerror="this.style.display='none'"></div>
                <div class="product-name">${p.name}</div>
                <div style="font-size:.78rem;color:var(--text-muted);">${p.desc||""}</div>
                <div style="display:flex;justify-content:space-between;align-items:center;">
                  <span class="product-price">${format(p.price)}</span>
                  <button class="btn btn-primary" onclick="addToCart('${p.id}')">âž• Add</button>
                </div>`;
              grid.appendChild(d);
            });
        }
      
        function addToCart(id){
          const p = products.find(x => x.id == id);
          const ex = cart.find(c => c.id == id);
          ex ? ex.qty++ : cart.push({ id:p.id, name:p.name, price:p.price, qty:1 });
          renderCart();
        }
      
        function renderCart(){
          let html="", total=0;
          cart.forEach((c,i)=>{
            total += c.price * c.qty;
            html += `
              <div class="cart-item">
                ${c.name} Ã— <input type="number" min="1" value="${c.qty}" style="width:50px" onchange="cart[${i}].qty=this.value;renderCart()">
                <span>${format(c.price*c.qty)}</span>
                <button class="btn btn-outline" onclick="cart.splice(${i},1);renderCart()">âœ–</button>
              </div>`;
          });
      
          document.getElementById("cartItems").innerHTML = html || "Cart is empty";
          document.getElementById("cartCount").innerText = cart.length;
          document.getElementById("navCartCount").innerText = cart.length;
          document.getElementById("cartTotal").innerText = format(total);
        }
      
        // ---------- NAVIGATION ----------
        document.getElementById("navShopBtn").onclick = () => {
          document.getElementById("adminSection").style.display = "none";
          document.getElementById("shopSection").style.display = "block";
        };
      
        document.getElementById("navAdminBtn").onclick = () => {
          const pwd = prompt("Admin Password:");
          if(pwd === "kk27@admin"){
            adminUnlocked = true;
            document.getElementById("adminSection").style.display = "block";
            document.getElementById("shopSection").style.display = "none";
            renderAdmin();
          }
        };
      
        // ðŸ”¥ Navbar Cart Button â€” scroll to cart section
        document.getElementById("navCartBtn").onclick = () => {
          const cartSection = document.querySelector(".cart-card");
          cartSection.scrollIntoView({ behavior: "smooth" });
      
          // flash glow when opened
          cartSection.style.boxShadow = "0 0 12px rgba(20,184,166,.9)";
          setTimeout(() => (cartSection.style.boxShadow = "none"), 1200);
        };
      
        // ---------- WHATSAPP ORDER ----------
        document.getElementById("checkoutForm").onsubmit = (e)=>{
          e.preventDefault();
          if(cart.length === 0) return;
      
          const n = document.getElementById("custName").value;
          const p = document.getElementById("custPhone").value;
          const a = document.getElementById("custAddress").value;
          const note = document.getElementById("custNote").value;
      
          let msg = `New Order â€“ KAIVAL KRUPA ELECTRIC BIKE WORLD\n\nCustomer:\n${n}\n${p}\n${a}\n\nItems:\n`;
          cart.forEach((c,i)=> msg += `${i+1}. ${c.name} (Qty: ${c.qty}) â€“ ${format(c.price)}\n`);
          msg += `\nTotal: ${document.getElementById("cartTotal").innerText}\n${note}`;
      
          window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`,"_blank");
          document.getElementById("statusMsg").innerText = "âœ” Thank you for ordering! WhatsApp will open now.";
          cart = []; renderCart();
        };
      
        // ---------- ADMIN ----------
        document.getElementById("adminForm").onsubmit = (e)=>{
          e.preventDefault();
          const id = document.getElementById("partId").value;
          const obj = {
            id: id || "P"+Date.now(),
            name: partName.value,
            category: partCategory.value,
            price: Number(partPrice.value),
            image: partImage.value,
            desc: partDesc.value
          };
          if(id){
            const i = products.findIndex(x=>x.id == id);
            products[i] = obj;
          } else products.push(obj);
      
          saveProducts(); renderProducts(); renderAdmin();
          e.target.reset(); partId.value = "";
        };
      
        function renderAdmin(){
          const box = document.getElementById("adminList");
          box.innerHTML = products.map(p => `
            <div style="margin-bottom:.6rem;">
              <b>${p.name}</b> â€“ ${format(p.price)}<br>
              <a href="#" onclick="editAdmin('${p.id}')">Edit</a> |
              <a href="#" onclick="delAdmin('${p.id}')">Delete</a>
            </div>`).join("");
        }
      
        function editAdmin(id){
          const p = products.find(x => x.id == id);
          partId.value = p.id; partName.value = p.name; partCategory.value = p.category;
          partPrice.value = p.price; partImage.value = p.image; partDesc.value = p.desc;
        }
      
        function delAdmin(id){
          if(confirm("Delete product?")){
            products = products.filter(x => x.id != id);
            saveProducts(); renderProducts(); renderAdmin();
          }
        }
      
        // ---------- DEFAULT PRODUCTS IF EMPTY ----------
        if(products.length === 0){
          products = [
            {id:"P1",name:"48V 1000W Hub Motor",category:"Motor",price:8500,image:"https://images.pexels.com/photos/163184/wheel-bike-bicycle-cycling-163184.jpeg",desc:"High torque hub motor"},
            {id:"P2",name:"Lithium Battery 48V",category:"Battery",price:18500,image:"https://images.pexels.com/photos/1105379/pexels-photo-1105379.jpeg",desc:"Long-life lithium battery"},
          ];
          saveProducts();
        }
      
        renderProducts();
        renderCart();
        document.getElementById("yearSpan").innerText = new Date().getFullYear();
        searchInput.oninput = renderProducts;
      </script>
      </body>
      </html>
          
